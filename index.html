<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Nate Flanagan</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script>
      function updateJoke() {
        fetch("https://v2.jokeapi.dev/joke/Any?blacklistFlags=nsfw,religious,political,racist,sexist,explicit&type=single")
          .then(response => response.json())
          .then(response_json => $("#joke-container").html(response_json.joke))
      }

      function updateDigitalClock() {
        const clockElement = document.getElementById("digital-clock");
        //if (!clockElement) {
        //  return;
        //}
        let timeFormatter = new Intl.DateTimeFormat("en-US", {"timeStyle": "short"});
        clockElement.innerText = timeFormatter.format(new Date());
      }
    </script>
  </head>
  <body>
    <main id="main">
      <script type="module" src="/src/main.jsx"></script>
    </main>
  </body>
  <script>
    updateJoke();
    setTimeout(updateDigitalClock, 200);  // TODO - this should probably be moved to the react part
    setInterval(updateJoke, 60000);
    setInterval(updateDigitalClock, 60000);
  </script>
</html>
